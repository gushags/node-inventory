<!-- views/updateProduct.ejs -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/styles.css" />
    <title><%= title %></title>
  </head>
  <body>
    <header class="product-header white-text">
      <%- include('partials/nav.ejs') %>
    </header>
    <main>
      <div class="prod-container">
        <div>
          <form method="POST" action="/product/<%= inventory.finv_id %>">
            <input hidden name="furn_id" value="<%= inventory.furn_id %>" />
            <h1>
              <label for="name">Product name:</label>
              <input
                type="text"
                id="name"
                name="name"
                value="<%= inventory.furn_name %>"
              />
            </h1>
            <div id="desc-container">
              <label for="description"><strong>Description:</strong></label>
              <div class="description">
                <textarea name="description" id="description">
<%= inventory.furn_description %></textarea
                >
              </div>
            </div>
            <div class="card-bottom">
              <label for="collection"><strong>Collection:</strong></label>
              <p
                hidden
                id="coll-name"
                data-collection="<%= inventory.collection_name %>"
              ></p>
              <select id="collection" name="collection">
                <% collections.map((item) => { %> <% if (item.collection_name ==
                inventory.collection_name) { %>
                <option selected value="<%= item.collection_id %>">
                  <%= item.collection_name %>
                </option>
                <% } else { %>
                <option value="<%= item.collection_id %>">
                  <%= item.collection_name %>
                </option>
                <% } }) %>
              </select>

              <label for="wood"><strong>Wood:</strong></label>
              <select id="wood" name="wood">
                <% wood.map((item) => { %> <% if (item.wood_name ==
                inventory.wood_name) { %>
                <option selected value="<%= item.wood_id %>">
                  <%= item.wood_name %>
                </option>
                <% } else { %>
                <option value="<%= item.wood_id %>">
                  <%= item.wood_name %>
                </option>
                <% } }) %>
              </select>

              <label for="ftype"><strong>Furniture Types:</strong></label>
              <select id="ftype" name="ftype">
                <% ftypes.map((item) => { %> <% if (item.ftype_name ==
                inventory.types) { %>
                <option selected value="<%= item.ftype_id %>">
                  <%= item.ftype_name %>
                </option>
                <% } else { %>
                <option value="<%= item.ftype_id %>">
                  <%= item.ftype_name %>
                </option>
                <% } }) %>
              </select>
              <div class="update-rooms">
                <fieldset>
                  <legend><strong>Rooms</strong></legend>
                  <% rooms.map(item => { %> <% if
                  (inventory.rooms.includes(item.room_name)) { %>
                  <label>
                    <input
                      type="checkbox"
                      name="roomIds[]"
                      value="<%= item.room_id %>"
                      checked
                    />
                    <%= item.room_name %>
                  </label>
                  <% } else { %>
                  <label>
                    <input
                      type="checkbox"
                      name="roomIds[]"
                      value="<%= item.room_id %>"
                    />
                    <%= item.room_name %>
                  </label>
                  <% } }) %>
                </fieldset>
              </div>

              <label for="quantity"><strong>Quantity:</strong></label>
              <input
                type="number"
                id="quantity"
                name="quantity"
                min="0"
                value="<%= inventory.finv_quantity %>"
              />
            </div>
            <button type="submit">Update</button>
          </form>
        </div>
      </div>
    </main>
    <script src="/product.js"></script>
  </body>
</html>
